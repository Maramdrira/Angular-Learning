


<form class="p-3" [formGroup]="myForm" (ngSubmit)="onSubmit()">



 <div class="mb-3">

  <label>Titre</label>

  <input formControlName="title" type="text" class="form-control">



 <div class="text-danger" *ngIf="title?.touched && myForm.get('title')?.invalid">

   <small *ngIf="myForm.get('title')?.errors?.['required']">Titre obligatoire.</small>
   <small *ngIf="myForm.get('title')?.errors?.['minlength']">Minimum 5 caractères.</small>
   <small *ngIf="myForm.get('title')?.errors?.['pattern']">Doit commencer par une majuscule et contenir seulement des lettres.</small>
  </div>
 </div>



 <div class="mb-3">
  <label>Description</label>
  <textarea formControlName="description" rows="4" class="form-control"></textarea>
   <div class="text-danger" *ngIf="myForm.get('description')?.touched && myForm.get('description')?.invalid">
   <small *ngIf="myForm.get('description')?.errors?.['required']">Description obligatoire.</small>
   <small *ngIf="myForm.get('description')?.errors?.['minlength']">
    Minimum 30 caractères.
   </small>
  </div>
 </div>



 <div class="mb-3">
  <label>Catégorie</label>

  <select formControlName="category" class="form-select" >
   <option value="">-- Choisir une catégorie --</option>
   <option *ngFor="let c of categories" >{{ c }}</option>
  </select>

<div class="text-danger" *ngIf="myForm.get('category')?.invalid && myForm.get('category')?.touched">
   <small>Catégorie obligatoire.</small>
  </div>
 </div>

 <div class="mb-3">
  <label>Date</label>
  <input formControlName="date" type="text" class="form-control" readonly>
 </div>

 <div class="mb-3">
  <label>Status</label>
  <input formControlName="status" type="text" class="form-control" readonly>
 </div>
 <button [disabled]="myForm.invalid" class="btn btn-primary" type="submit">{{ id ? "Update" : "Add" }} </button>
</form>


 valid: {{myForm.get('title')?.valid}} -  invalid: {{myForm.get('title')?.invalid}}
 <p> touched:{{myForm.get('title')?.touched}} - untouched: {{myForm.get('title')?.untouched}} </p>
 <p> dirty:{{myForm.get('title')?.dirty}} - pristine: {{myForm.get('title')?.pristine}} </p>



<p>----------------------------------------------------------------------------</p>
<p>----------------------------------------------------------------------------</p>

<p>----------------------------------------------------------------------------</p>

<p>----------------------------------------------------------------------------</p>

 <p>el 5idma el 9dimaa</p>

<!-- 
  [formGroup]="myForm"
  --------------------
  We bind the ENTIRE FormGroup object to the form.
  Now the form has access to all controls (title, description).
  This is ONE-TIME setup - we pass the whole group.
  
  Needs [ ] because "myForm" is a VARIABLE (the actual object).
-->

<form [formGroup]="myForm">
  
  <!-- 
    formControlName="title"
    -----------------------
    The form already HAS the FormGroup from above.
    Now we just need to tell it WHICH control to use.
    We pass the NAME "title" as a string to look it up inside the group.
    
    No [ ] needed because "title" is just a STRING KEY, not a variable.
    It's like saying: "Go find the control named 'title' in myForm"
  -->
  title: <input formControlName="title">{{myForm.get('title')?.valid}}
  <div *ngIf="myForm.get('title')?.touched && myForm.get('title')?.invalid "> Title obligatoire !</div>
  
  <!-- Same: "description" is the string key to find that control -->
  description: <textarea formControlName="description"></textarea>
    <!-- <div *ngIf="myForm.get('description')?.touched && myForm.get('description')?.invalid "> Description obligatoire !</div> -->
    <div *ngIf="myForm.get('description')?.errors?.['required']">oblig</div>
    <div  *ngIf="myForm.get('description')?.errors?.['minlength']">min 3 caractères</div>

<!-- 
  {{myForm.get('description')?.touched}}
    {{myForm.get('description')?.dirty}}
  {{myForm.get('description')?.pristine}} -->

  
</form>