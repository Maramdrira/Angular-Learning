<!-- 
  FORM SETUP
  =================================================================
  [formGroup]="myForm"      → Binds form to FormGroup in component
  (ngSubmit)="onSubmit()"   → Calls onSubmit() when form is submitted
  class="p-3"               → Bootstrap padding utility to make it work u should indtall bootstrap and add it in angular.json file  "node_modules/bootstrap/dist/css/bootstrap.min.css"
-->
<form class="p-3" [formGroup]="myForm" (ngSubmit)="onSubmit()">
  <div class="mb-3">
    <label>Titre</label>
    
    <!-- 
      formControlName="title"  → Links to FormControl named "title" in FormGroup
    -->
    <input formControlName="title" type="text" class="form-control">

    <!-- 
      ERROR MESSAGES CONTAINER
      =================================================================
      *ngIf="title?.touched && myForm.get('title')?.invalid"
      
      Shows errors only if:
      - touched: User has interacted with field (blurred)
      - invalid: Field fails validation rules
      
      ?. = Optional chaining (safe navigation), prevents errors if null
    -->
    <div class="text-danger" *ngIf="title?.touched && myForm.get('title')?.invalid">
      
      <!-- 
        Specific error messages based on validator type:
        errors?.['required']    → Field is empty
        errors?.['minlength']    → Too short
        errors?.['pattern']      → Regex pattern failed
      -->
      <small *ngIf="myForm.get('title')?.errors?.['required']">Titre obligatoire.</small>
      <small *ngIf="myForm.get('title')?.errors?.['minlength']">Minimum 5 caractères.</small>
      <small *ngIf="myForm.get('title')?.errors?.['pattern']">Doit commencer par une majuscule et contenir seulement des lettres.</small>
    </div>
  </div>
  <div class="mb-3">
    <label>Description</label>
        <textarea formControlName="description" rows="4" class="form-control"></textarea>
    
        <div class="text-danger" *ngIf="myForm.get('description')?.touched && myForm.get('description')?.invalid">
      <small *ngIf="myForm.get('description')?.errors?.['required']">Description obligatoire.</small>
      <small *ngIf="myForm.get('description')?.errors?.['minlength']">
        Minimum 30 caractères.
      </small>
    </div>
  </div>

  <div class="mb-3">
    <label>Catégorie</label>
    
 
    <select formControlName="category" class="form-select">
      <option value="">-- Choisir une catégorie --</option>
      
      <option *ngFor="let c of categories">{{ c }}</option>
    </select>

    <div class="text-danger" *ngIf="myForm.get('category')?.invalid && myForm.get('category')?.touched">
      <small>Catégorie obligatoire.</small>
    </div>
  </div>

  <!-- 
    READ-ONLY FIELDS (Auto-populated)
    =================================================================
    readonly attribute prevents user editing
    Values set programmatically in component
  -->
  <div class="mb-3">
    <label>Date</label>
    <input formControlName="date" type="text" class="form-control" readonly>
  </div>

  <div class="mb-3">
    <label>Status</label>
    <input formControlName="status" type="text" class="form-control" readonly>
  </div>

  <!-- 
    SUBMIT BUTTON
    =================================================================
    [disabled]="myForm.invalid"  → Property binding, disables if form invalid
    
    {{ id ? "Update" : "Add" }}  → Ternary operator for dynamic text
    - If id exists: show "Update" (edit mode)
    - If no id: show "Add" (create mode)
  -->
  <button [disabled]="myForm.invalid" class="btn btn-primary" type="submit">
    {{ id ? "Update" : "Add" }}
  </button>
</form>


valid: {{myForm.get('title')?.valid}} - invalid: {{myForm.get('title')?.invalid}}
<p>touched:{{myForm.get('title')?.touched}} - untouched: {{myForm.get('title')?.untouched}}</p>
<p>dirty:{{myForm.get('title')?.dirty}} - pristine: {{myForm.get('title')?.pristine}}</p>

<!--
  OTHER COMMON STATES (not shown but available):
  
  | State      | Meaning                              | Use Case                    |
  |------------|--------------------------------------|-----------------------------|
  | .valid     | All validators pass                  | Enable submit button        |
  | .invalid   | One or more validators fail          | Show error messages         |
  | .touched   | User blurred out of field            | Show validation on blur     |
  | .untouched | User hasn't left field yet           | Don't show errors yet       |
  | .pending   | Async validation in progress         | Show loading spinner        |
  | .errors    | Object with validation errors        | Display specific messages   |
  | .value     | Current input value                  | Get/set form data           |
  
-->


<p>----------------------------------------------------------------------------</p>
<p>----------------------------------------------------------------------------</p>

<p>----------------------------------------------------------------------------</p>

<p>----------------------------------------------------------------------------</p>

 <p>el 5idma el 9dimaa</p>

<!-- 
  [formGroup]="myForm"
  --------------------
  We bind the ENTIRE FormGroup object to the form.
  Now the form has access to all controls (title, description).
  This is ONE-TIME setup - we pass the whole group.
  
  Needs [ ] because "myForm" is a VARIABLE (the actual object).
-->

<form [formGroup]="myForm">
  
  <!-- 
    formControlName="title"
    -----------------------
    The form already HAS the FormGroup from above.
    Now we just need to tell it WHICH control to use.
    We pass the NAME "title" as a string to look it up inside the group.
    
    No [ ] needed because "title" is just a STRING KEY, not a variable.
    It's like saying: "Go find the control named 'title' in myForm"
  -->
  title: <input formControlName="title">{{myForm.get('title')?.valid}}
  <div *ngIf="myForm.get('title')?.touched && myForm.get('title')?.invalid "> Title obligatoire !</div>
  
  <!-- Same: "description" is the string key to find that control -->
  description: <textarea formControlName="description"></textarea>
    <!-- <div *ngIf="myForm.get('description')?.touched && myForm.get('description')?.invalid "> Description obligatoire !</div> -->
    <div *ngIf="myForm.get('description')?.errors?.['required']">oblig</div>
    <div  *ngIf="myForm.get('description')?.errors?.['minlength']">min 3 caractères</div>


  
</form>